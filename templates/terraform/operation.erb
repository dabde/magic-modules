<%
  product_name = object.__product.name
-%>
<%= lines(autogen_notice :go) -%>
package google

import (
  "fmt"
)

type <%= product_name -%>OperationWaiter struct {
  Config *Config
  TimeoutMinutes int
  CommonOperationWaiter
}

func (w *<%= product_name -%>OperationWaiter) QueryOp() (interface{}, error) {
  if w == nil {
    return nil, fmt.Errorf("Cannot query operation, it's unset or nil.")
  }
  // Returns the proper get.
  url := fmt.Sprintf("<%= build_url([object.__product.base_url, async.operation.base_url]).gsub('{{op_id}}', '%s') -%>", w.CommonOperationWaiter.Op.Name)
  return sendRequestWithTimeout(w.Config, "GET", url, nil, time.Duration(w.TimeoutMinutes) * time.Minute)
}

func <%= product_name.underscore -%>OperationWaitTime(config *Config, op *<%= product_name.downcase -%>.Operation, project, activity string, timeoutMinutes int) error {
  w := &<%= product_name -%>OperationWaiter{
    Config: config,
    TimeoutMinutes: timeoutMinutes,
  }
  if err := w.CommonOperationWaiter.SetOp(op); err != nil {
    return err
  }
  return OperationWait(w, activity, timeoutMinutes)
}
