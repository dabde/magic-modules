<% project_name = grab_attributes['project_name'] -%>
<% ssl_policy = grab_attributes['ssl_policy'] -%>
<% if doc_generation -%>
<% else # if doc_generation -%>
project_name = attribute('project_name', default: '<%= project_name -%>')
ssl_policy = attribute('ssl_policy', default: <%= ssl_policy -%>)

<% end # if doc_generation -%>

resource = google_compute_ssl_policies({project: <%= doc_generation ? "'#{project_name}'" : "project_name" -%>})

describe resource do
  it { should exist }
  its('names') { should include <%= doc_generation ? "'#{ssl_policy['name']}'" : "ssl_policy['name']" -%> }
  its('profiles') { should include <%= doc_generation ? "'#{ssl_policy['profile']}'" : "ssl_policy['profile']" -%> }
end