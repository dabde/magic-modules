<% gcp_location = "#{external_attribute('gcp_location', doc_generation)}" -%>
<% gcp_storage_bucket_name = "#{external_attribute('gcp_storage_bucket_name', doc_generation)}" -%>
describe google_storage_bucket(name: <%= gcp_storage_bucket_name -%>) do
  it { should exist }
  its('location') { should cmp <%= gcp_location -%>.upcase }

  its('storage_class') { should eq "STANDARD" }
end

describe google_storage_bucket(name: "nonexistent") do
  it { should_not exist }
end