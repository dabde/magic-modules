<% autogen_exception -%>
package google

import (
	"encoding/json"
	"fmt"
	"github.com/terraform-providers/terraform-provider-google-beta/google-beta"
	"os"

	"github.com/hashicorp/terraform/helper/mutexkv"
	"github.com/hashicorp/terraform/helper/schema"
	"github.com/hashicorp/terraform/terraform"

	googleoauth "golang.org/x/oauth2/google"
)

// For generated resources, endpoint entries live in product-specific provider
// files. Collect handwritten ones here.

var CloudFunctionsDefaultBasePath = "https://cloudfunctions.googleapis.com/v1/"

var CloudFunctionsCustomEndpointEntry = &schema.Schema{
	Type:         schema.TypeString,
	Optional:     true,
	ValidateFunc: validateCustomEndpoint,
	DefaultFunc: schema.MultiEnvDefaultFunc([]string{
		"GOOGLE_CLOUD_FUNCTIONS_CUSTOM_ENDPOINT",
	}, CloudFunctionsDefaultBasePath),
}

func validateCustomEndpoint(v interface{}, k string) (ws []string, errors []error) {
	re := `.*/[^/]+/$`
	return validateRegexp(re)(v, k)
}
