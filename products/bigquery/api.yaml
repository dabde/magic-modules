# Copyright 2017 Google Inc.
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

--- !ruby/object:Api::Product
name: Google Cloud BigQuery
prefix: gbigquery
versions:
  - !ruby/object:Api::Product::Version
    name: v1
    base_url: https://www.googleapis.com/bigquery/v2/
    default: true
scopes:
  - https://www.googleapis.com/auth/bigquery
objects:
  - !ruby/object:Api::Resource
    name: 'Dataset'
    kind: 'bigquery#dataset'
    base_url: projects/{{project}}/datasets
    description: >
      Datasets allow you to organize and control access to your tables.
    properties:
      - !ruby/object:Api::Type::Array
        name: 'access'
        description: 'Access controls on the bucket.'
        item_type: !ruby/object:Api::Type::NestedObject
          properties:
            - !ruby/object:Api::Type::String
              name: 'domain'
              description: >
                A domain to grant access to. Any users signed in with the
                domain specified will be granted the specified access
            - !ruby/object:Api::Type::String
              name: 'groupByEmail'
              description: An email address of a Google Group to grant access to
            - !ruby/object:Api::Type::Enum
              name: 'role'
              description: >
                Describes the rights granted to the user specified by the other
                member of the access object
              values:
                - :READER
                - :WRITER
                - :OWNER
            - !ruby/object:Api::Type::String
              name: 'specialGroup'
              description: A special group to grant access to.
            - !ruby/object:Api::Type::String
              name: 'userByEmail'
              description: >
                An email address of a user to grant access to. For example:
                fred@example.com
            - !ruby/object:Api::Type::NestedObject
              name: 'view'
              description: >
                A view from a different dataset to grant access to. Queries
                executed against that view will have read access to tables in
                this dataset. The role field is not required when this field is
                set. If that view is updated by any user, access to the view
                needs to be granted again via an update operation.
              properties:
                - !ruby/object:Api::Type::String
                  name: 'datasetId'
                  description: The ID of the dataset containing this table.
                  required: true
                - !ruby/object:Api::Type::String
                  name: 'projectId'
                  description: The ID of the project containing this table.
                  required: true
                - !ruby/object:Api::Type::String
                  name: 'tableId'
                  description: >
                    The ID of the table. The ID must contain only letters (a-z,
                    A-Z), numbers (0-9), or underscores (_). The maximum length
                    is 1,024 characters.
                  required: true
      - !ruby/object:Api::Type::Integer
        name: 'creationTime'
        output: true
        description: >
          The time when this dataset was created, in milliseconds since the
          epoch.
      - !ruby/object:Api::Type::NestedObject
        name: 'datasetReference'
        description: 'A reference that identifies the dataset.'
        required: true
        properties:
          - !ruby/object:Api::Type::String
            name: 'datasetId'
            description: >
              A unique ID for this dataset, without the project name. The ID
              must contain only letters (a-z, A-Z), numbers (0-9), or
              underscores (_). The maximum length is 1,024 characters.
            required: true
          - !ruby/object:Api::Type::String
            name: 'projectId'
            description: The ID of the project containing this dataset.
      - !ruby/object:Api::Type::Integer
        name: 'defaultTableExpirationMs'
        description: >
          The default lifetime of all tables in the dataset, in milliseconds
      - !ruby/object:Api::Type::String
        name: 'description'
        description: A user-friendly description of the dataset
      - !ruby/object:Api::Type::String
        name: 'friendlyName'
        description: A descriptive name for the dataset
      - !ruby/object:Api::Type::String
        name: 'id'
        output: true
        description: >
          The fully-qualified unique name of the dataset in the format
          projectId:datasetId. The dataset name without the project name is
          given in the datasetId field
      - !ruby/object:Api::Type::NameValues
        name: 'labels'
        description: >
          The labels associated with this dataset. You can use these to
          organize and group your datasets
        key_type: Api::Type::String
        value_type: Api::Type::String
      - !ruby/object:Api::Type::Integer
        name: 'lastModifiedTime'
        description: >
          The date when this dataset or any of its tables was last modified, in
          milliseconds since the epoch.
        output: true
      - !ruby/object:Api::Type::String
        name: 'location'
        description: >
          The geographic location where the dataset should reside. Possible
          values include EU and US. The default value is US.
        default_value: US
  - !ruby/object:Api::Resource
    name: 'Table'
    kind: 'bigquery#table'
    base_url: projects/{{project}}/datasets/{{dataset}}/tables
    description: >
      A Table that belongs to a Dataset
    properties:
      - !ruby/object:Api::Type::Integer
        name: 'creationTime'
        output: true
        description: >
          The time when this dataset was created, in milliseconds since the
          epoch.
      - !ruby/object:Api::Type::String
        name: 'description'
        description: A user-friendly description of the dataset
      - !ruby/object:Api::Type::NestedObject
        name: 'encryptionConfiguration'
        description: Custom encryption configuration
        properties:
          - !ruby/object:Api::Type::String
            name: 'kmsKeyName'
            description: >
              Describes the Cloud KMS encryption key that will be used to
              protect destination BigQuery table. The BigQuery Service Account
              associated with your project requires access to this encryption
              key.
      - !ruby/object:Api::Type::Integer
        name: 'expirationTime'
        description: >
          The time when this table expires, in milliseconds since the epoch. If
          not present, the table will persist indefinitely.
      - !ruby/object:Api::Type::NestedObject
        name: 'externalDataConfiguration'
        description: >
          Describes the data format, location, and other properties of a table
          stored outside of BigQuery. By defining these properties, the data
          source can then be queried as if it were a standard BigQuery table.
        properties:
          - !ruby/object:Api::Type::Boolean
            name: 'autodetect'
            description: >
              Try to detect schema and format options automatically. Any option
              specified explicitly will be honored.
          - !ruby/object:Api::Type::Enum
            name: 'compression'
            description: The compression type of the data source
            values:
              - :GZIP
              - :NONE
          - !ruby/object:Api::Type::Enum
            name: 'ignoreUnknownValues'
            description: >
              Indicates if BigQuery should allow extra values that are not
              represented in the table schema
          - !ruby/object:Api::Type::Integer
            name: 'maxBadRecords'
            description: >
              The maximum number of bad records that BigQuery can ignore when reading data
            default_value: 0
          - !ruby/object:Api::Type::NestedObject
            name: 'schema'
            description: 'The schema for the data. Schema is required for CSV and JSON formats'
            properties:
              - <THIS IS MY STOPPING POINT>
          - !ruby/object:Api::Type::NestedObject
            name: 'googleSheetsOptions'
            description: 'Additional options if sourceFormat is set to GOOGLE_SHEETS.'
            properties:
              - !ruby/object:Api::Type::Integer
                name: 'skipLeadingRows'
                description: >
                  The number of rows at the top of a Google Sheet that BigQuery
                  will skip when reading the data.
                default_value: 0
          - !ruby/object:Api::Type::NestedObject
            name: 'csvOptions'
            description: Additional properties to set if sourceFormat is set to CSV.  
            properties:
              - !ruby/object:Api::Type::Boolean
                name: 'allowJaggedRows'
                description: >
                  Indicates if BigQuery should accept rows that are missing
                  trailing optional columns
              - !ruby/object:Api::Type::Boolean
                name: 'allowQuotedNewlines'
                description: >
                  Indicates if BigQuery should allow quoted data sections that
                  contain newline characters in a CSV file 
                default: false
              - !ruby/object:Api::Type::Enum
                name: 'encoding'
                description: 'The character encoding of the data'
                values:
                  - :UTF-8
                  - :ISO-8859-1
              - !ruby/object:Api::Type::String
                name: 'fieldDelimiter'
                description: 'The separator for fields in a CSV file'
              - !ruby/object:Api::Type::String
                name: 'quote'
                description: 'The value that is used to quote data sections in a CSV file'
              - !ruby/object:Api::Type::Integer
                name: 'skipLeadingRows'
                description: >
                  The number of rows at the top of a CSV file that BigQuery
                  will skip when reading the data.
                default_value: 0
          - !ruby/object:Api::Type::NestedObject
            name: 'bigtableOptions'
            description: Additional options if sourceFormat is set to BIGTABLE.
            properties:
              - !ruby/object:Api::Type::Boolean
                name: 'ignoreUnspecifiedColumnFamilies'
                description: >
                  If field is true, then the column families that are not specified in
                  columnFamilies list are not exposed in the table schema
              - !ruby/object:Api::Type::Boolean
                name: 'readRowkeyAsString'
                description: >
                  If field is true, then the rowkey column families will be
                  read and converted to string.
              - !ruby/object:Api::Type::Array
                name: 'columnFamilies'
                description: >
                  List of column families to expose in the table schema along
                  with their types.
                item_type: !ruby/object:Api::Type::NestedObject
                  properties:
                    - !ruby/object:Api::Type::Array
                      name: 'columns'
                      description: >
                         Lists of columns that should be exposed as individual
                         fields as opposed to a list of (column name, value) pairs.
                      item_type: !ruby/object:Api::Type::NestedObject
                        properties:
                          - !ruby/object:Api::Type::Enum
                            name: 'encoding'
                            description: The encoding of the values when the type is not STRING
                            values:
                              - :TEXT
                              - :BINARY
                         - !ruby/object:Api::Type::String
                            name: 'fieldName'
                            description: >
                              If the qualifier is not a valid BigQuery field
                              identifier, a valid identifier must be provided as
                              the column field name and is used as field name in
                              queries.
                         - !ruby/object:Api::Type::Boolean
                            name: 'onlyReadLatest'
                            description: >
                              If this is set, only the latest version of value in this column are exposed
                         - !ruby/object:Api::Type::String
                            name: 'qualifierString'
                            description: Qualifier of the column
                            required: true
                          - !ruby/object:Api::Type::Enum
                            name: 'type'
                            description: The type to convert the value in cells of this column
                            values:
                              - :BYTES
                              - :STRING
                              - :INTEGER
                              - :FLOAT
                              - :BOOLEAN
                    - !ruby/object:Api::Type::Enum
                      name: 'encoding'
                      description: The encoding of the values when the type is not STRING
                      values:
                        - :TEXT
                        - :BINARY
                    - !ruby/object:Api::Type::String
                      name: 'familyId'
                      description: Identifier of the column family.
                    - !ruby/object:Api::Type::Boolean
                      name: 'onlyReadLatest'
                      description: >
                        If this is set only the latest version of value are
                        exposed for all columns in this column family
                    - !ruby/object:Api::Type::Enum
                      name: 'type'
                      description: The type to convert the value in cells of this column family
                      values:
                        - :BYTES
                        - :STRING
                        - :INTEGER
                        - :FLOAT
                        - :BOOLEAN
